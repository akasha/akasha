{
  "sourceSelector": "!name=minimal_event !name=secure_contexts",
  "stages": [
    {
      "name": "RenameType",
      "description": "Both permissions.webdidl and deviceorientation.webidl define PermissionState and they have different shapes",
      "sourceSelector": "name=deviceorientation",
      "config": {
        "namePattern": "^PermissionState$",
        "replacement": "DevicePermissionState"
      }
    },
    {
      "name": "AddExtendedAttribute",
      "description": "Add LegacyNoInterfaceObject as chrome is non-compliant wrt this. See https://bugs.chromium.org/p/chromium/issues/detail?id=674507",
      "sourceSelector": "name=speech_api",
      "config": {
        "namePattern": "^(SpeechSynthesis|SpeechSynthesisVoice|SpeechRecognition|SpeechRecognitionError|SpeechRecognitionAlternative|SpeechRecognitionResult|SpeechRecognitionResultList|SpeechRecognitionEvent|SpeechGrammar|SpeechGrammarList)$",
        "extendedAttribute": "LegacyNoInterfaceObject"
      }
    },
    {
      "name": "AddExtendedAttribute",
      "description": "Add LegacyNoInterfaceObject as chrome is non-compliant wrt this. See https://bugs.chromium.org/p/chromium/issues/detail?id=674507",
      "sourceSelector": "name=web_animations_1",
      "config": {
        "namePattern": "^Animation$",
        "extendedAttribute": "LegacyNoInterfaceObject"
      }
    },
    {
      "name": "AddExtendedAttribute",
      "description": "Add LegacyNoInterfaceObject as chrome is non-compliant wrt this. See https://bugs.chromium.org/p/chromium/issues/detail?id=674507",
      "sourceSelector": "name=web_audio_api",
      "config": {
        "namePattern": "^(AudioContext|OfflineAudioContext)$",
        "extendedAttribute": "LegacyNoInterfaceObject"
      }
    },
    {
      "name": "AddExtendedAttribute",
      "description": "Add LegacyNoInterfaceObject as spec still uses the historic 'NoInterfaceObject' extended attribute",
      "sourceSelector": "name=geolocation_api",
      "config": {
        "namePattern": "^(Coordinates|Geolocation|Position|PositionError)$",
        "extendedAttribute": "LegacyNoInterfaceObject"
      }
    },
    {
      "name": "RemoveExtendedAttribute",
      "description": "Remove NoInterfaceObject as spec still uses the historic 'NoInterfaceObject' extended attribute",
      "sourceSelector": "name=geolocation_api",
      "config": {
        "namePattern": "^(Coordinates|Geolocation|Position|PositionError)$",
        "extendedAttribute": "NoInterfaceObject"
      }
    },
    {
      "name": "RemoveMember",
      "description": "the cssom spec 'overrides' the definitions to be of type double",
      "sourceSelector": "name=uievents",
      "config": {
        "elementNamePattern": "^(MouseEvent|MouseEventInit)$",
        "memberNamePattern": "^(clientX|clientY|screenX|screenY)$",
        "types": ["interface_type", "dictionary"]
      }
    },
    {
      "name": "Merge"
    },
    {
      "name": "Validate"
    },
    {
      "name": "RemoveIncludes",
      "description": "Both SVGURIReference and HTMLHyperlinkElementUtils mixin define the href attribute and they are defined as different types. USVString in HTMLHyperlinkElementUtils and SVGAnimatedString in SVGURIReference. This stage effectively selects the HTMLHyperlinkElementUtils variant which seems more authoritative",
      "config": {
        "interfacePattern": "^SVGAElement$",
        "mixinPattern": "^SVGURIReference$"
      }
    },
    {
      "name": "Validate"
    },
    {
      "name": "Flatten"
    },
    {
      "name": "ExtractExposureSet",
      "config": {
        "globalInterface": "Window"
      }
    },
    {
      "name": "RemoveElement",
      "description": "The AudioWorkletProcessorConstructor is only used by elements exposed in the AudioWorklet exposure and references interfaces not available in Window exposure",
      "config": {
        "namePattern": "^AudioWorkletProcessorConstructor$",
        "type": ["callback"]
      }
    },
    {
      "name": "RemoveElement",
      "description": "The ExtendableMessageEventInit is only used by elements exposed in the ServiceWorker exposure and references interfaces not available in Window exposure",
      "config": {
        "namePattern": "^ExtendableMessageEventInit$",
        "type": ["dictionary"]
      }
    },
    {
      "name": "Validate"
    },
    {
      "name": "Emit",
      "config": {
        "filePattern": "data/output/complete.webidl"
      }
    }
  ]
}
